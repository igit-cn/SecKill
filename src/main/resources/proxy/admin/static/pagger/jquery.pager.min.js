/**
 * jQuery 分页插件
 * date: 2017-09-23
 * author: 黄海 <master@nommo.cn>
 * version: 1.0.0
 */
!function(a){var b=function(b,d,e){var h,i,j,k,l,m,n,f=d.page-2>0?d.page-2:1,g=f+5>e.totalPage?e.totalPage+1:f+5;for(5>g-f&&(f=e.totalPage-4),1>f&&(f=1),b.addClass("jquery-pager"),strHtml='<a class="page-first" href="javascript:void(0)">首页</a><a class="page-prev" href="javascript:void(0)">上一页</a>',h=f;g>h;++h)i="",h==d.page&&(i=" current"),strHtml+='<a class="page '+i+'" data-page="'+h+'" href="javascript:void(0)">'+h+"</a>";strHtml+='<a class="page-next" href="javascript:void(0)">下一页</a><a class="page-last" href="javascript:void(0)">尾页</a>',b.html(strHtml),j=b.children(".page-first"),k=b.children(".page-prev"),l=b.children(".page"),m=b.children(".page-next"),n=b.children(".page-last"),d.page<=1&&(j.addClass("disabled"),k.addClass("disabled")),d.page>=e.totalPage&&(m.addClass("disabled"),n.addClass("disabled")),b.children('.page[data-page="'+d.page+'"]').addClass("current"),d.page>1&&(j.off("click").on("click",function(){d.page=1,location.hash="#"+d.varPage+"="+d.page,c(b,d)}),k.off("click").on("click",function(){d.page=parseInt(d.page)-1,location.hash="#"+d.varPage+"="+d.page,c(b,d)})),l.off("click").on("click",function(){var e=a(this).data("page");e!=d.page&&(d.page=e,location.hash="#"+d.varPage+"="+d.page,c(b,d))}),d.page<e.totalPage&&(m.off("click").on("click",function(){d.page=parseInt(d.page)+1,location.hash="#"+d.varPage+"="+d.page,c(b,d)}),n.off("click").on("click",function(){d.page=e.totalPage,location.hash="#"+d.varPage+"="+d.page,c(b,d)}))},c=function(c,d){var e=d.data;e[d.varPage]=d.page,e[d.varSize]=d.size,a.apiGet(d.url,e,function(a){a.data.totalPage=Math.ceil(a.data.total/d.size),a.data.totalPage<=0&&(a.data.totalPage=1),d.success({list:a.data.list,page:d.page,totalPage:a.data.totalPage,totalData:a.data.total}),b(c,d,a.data)})};a.fn.pager=function(b){var f,d=a.extend({url:"",data:{},varPage:"page",varSize:"size",page:1,size:20,success:function(){}},b),e=a.url(location.href).fparam(d.varPage);return"undefined"==typeof e||isNaN(e)||(d.page=e),f=a(this),f.length<=0||f.length>1?(console.log("pagger plugin loading error"),void 0):(c(f,d),void 0)}}(jQuery);